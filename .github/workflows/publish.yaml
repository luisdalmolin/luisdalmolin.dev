on: push
name: Publish
jobs:
  linux-test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-node@v1

    - run: export NETLIFY_AUTH_TOKEN="${{ secrets.NETLIFY_AUTH_TOKEN }}"
    - run: |
      wget https://github.com/gohugoio/hugo/releases/download/v0.58.2/hugo_0.58.2_Linux-64bit.deb
      dpkg -i hugo_0.58.2_Linux-64bit.deb
      sudo apt-get install -f
    - run: npm install -g postcss-cli
    - run: npm install netlify-cli -g
    - run: hugo
    - run: netlify deploy --prod
